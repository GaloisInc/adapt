
# for gcc4.9:  sudo apt-get install g++-4.9-multilib libc6-dev-i386 libx32gcc-4.9-dev

(cd TransparentComputing/malware/cross-platform/simple-apt/simple && python cmake.py build && cp -p bin/linux/release/x64/simple /tmp/)

diff --git a/malware/cross-platform/simple-apt/simple/src/tcp.c b/malware/cross-platform/simple-apt/simple/src/tcp.c
index 5d3a9e8..f5037ad 100644
--- a/malware/cross-platform/simple-apt/simple/src/tcp.c
+++ b/malware/cross-platform/simple-apt/simple/src/tcp.c
@@ -11,6 +11,7 @@
 
 #include <stdio.h>
 #include <assert.h>
+#include "tc_marker.h"
 
 
 void tcp_init()
@@ -45,7 +46,7 @@ int tcp_initSession(const char *ip, unsigned short port)
 #ifdef WINDOWS
 	return tcp_windows_initSession(ip, port);
 #elif NIX
-	return tcp_linux_initSession(ip, port);
+	TC_MARK_RETURN(1, tcp_linux_initSession(ip, port));
 #else
 	assert(0);
 	return -1;
@@ -60,7 +61,7 @@ int tcp_startSession()
 #ifdef WINDOWS
 	return tcp_windows_startSession();
 #elif NIX
-	return tcp_linux_startSession();
+	TC_MARK_RETURN(2, tcp_linux_startSession());
 #else
 	assert(0);
 	return -1;
@@ -88,7 +89,7 @@ void tcp_endSession()
 #ifdef WINDOWS
 	tcp_windows_endSession();
 #elif NIX
-	tcp_linux_endSession();
+	TC_MARK_VOID(3, tcp_linux_endSession());
 #else
 	assert(0);
 #endif
