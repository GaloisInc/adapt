<!DOCTYPE html>

<meta charset="utf-8">
<head>
    <script type="text/javascript" src="javascripts/jquery.3.1.0.min.js"></script>
    <script type="text/javascript" src="javascripts/underscore.js"></script>
    <script type="text/javascript" src="javascripts/jquery.fancytree-all-deps.min.js"></script>
    <link rel="stylesheet" href="stylesheets/fancytree/skin-lion/ui.fancytree.css" />
    <script type="text/javascript">
$(function(){  
	$("#tree").fancytree({
		// extensions: ["edit", "filter"],
		source: {
			url: "/api/ppm/ProcessFileTouches",
			cache: false
		},
		// source: [
		// 	{title: "Node 1"},
		// 	{title: "Folder 2", folder: true, children: [
		// 		{title: "Node 2.1"},
		// 		{title: "Node 2.2"}
		// 	]}
		// ],
		// lazyLoad: function(event, data) {
		// 	var node = data.node;
		// 	// Issue an Ajax request to load child nodes
		// 	data.result = {
		// 		url: "/getBranchData",
		// 		data: {key: node.key}
		// 	}
		// },

		activeVisible: true, // Make sure, active nodes are visible (expanded)
		aria: true, // Enable WAI-ARIA support
	    autoActivate: true, // Automatically activate a node when it is focused using keyboard
	    autoCollapse: false, // Automatically collapse all siblings, when a node is expanded
	    autoScroll: false, // Automatically scroll nodes into visible area
	    clickFolderMode: 4, // 1:activate, 2:expand, 3:activate and expand, 4:activate (dblclick expands)
	    checkbox: false, // Show checkboxes
	    debugLevel: 4, // 0:quiet, 1:errors, 2:warnings, 3:infos, 4:debug
	    disabled: false, // Disable control
	    focusOnSelect: false, // Set focus when node is checked by a mouse click
	    escapeTitles: false, // Escape `node.title` content for display
	    generateIds: false, // Generate id attributes like <span id='fancytree-id-KEY'>
	    idPrefix: "ft_", // Used to generate node ids like <span id='fancytree-id-<key>'>
	    icon: true, // Display node icons
	    keyboard: true, // Support keyboard navigation
	    keyPathSeparator: "/", // Used by node.getKeyPath() and tree.loadKeyPath()
	    minExpandLevel: 1, // 1: root node is not collapsible
	    quicksearch: false, // Navigate to next node by typing the first letters
	    selectMode: 2, // 1:single, 2:multi, 3:multi-hier
	    tabindex: "0", // Whole tree behaves as one single control
	    titlesTabbable: false, // Node titles can receive keyboard focus
	    tooltip: false, // Use title as tooltip (also a callback could be specified)
	    loadChildren: function(event, data) { 
	    	var tree = $("#tree")
	    	tree.fancytree("getRootNode").sortChildren(null, true) 
	    	tree.fancytree("getTree").visit( function(node){
				// Expand all tree nodes
				node.setExpanded(true);
			})
	    }
	})
})
    </script>
</head>
<body>
	<div id="tree"></div>
</body>